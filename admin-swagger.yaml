openapi: 3.0.0
info:
  title: Shinr User Management API
  version: "1.0.0"
  description: API documentation for login and OTP verification

servers:
  - url: https://shinr-user-mgmt.onrender.com/

tags:
  - name: Vehicle
    description: Vehicle-related endpoints for fetching car details
  - name: Service
    description: Service management endpoints
  - name: Banner
    description: Banner management endpoints
  - name: Admin
    description: Admin authentication and management endpoints
  - name: Vendor
    description: Vendor management endpoints


paths:



  /service/add-service:
    post:
      tags:
        - Service
      summary: Add a new service
      security:
        - bearerAuth: []
      parameters:
        - in: header
          name: x-device-id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddServiceRequest"
      responses:
        "201":
          description: Service added successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessAddServiceResponse"
        "400":
          description: Invalid input data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Failed to add service
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
          
  /banner/get-categories:
    get:
      tags:
        - Banner
      summary: Get banner categories with search and pagination
      description: Returns all available banner categories with optional search and pagination.
      security:
        - bearerAuth: []    # Admin bearer token required
      parameters:

        - in: query
          name: search
          required: false
          schema:
            type: string
          description: Optional search term for filtering categories by display name.

        - in: query
          name: page
          required: false
          schema:
            type: integer
            default: 1
          description: Page number.

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            default: 10
          description: Number of categories per page.

      responses:
        "200":
          description: Categories fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessCategoryListResponse"

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"
          
  /banner/get-status:
    get:
      tags:
        - Banner
      summary: Get banner status and review status
      description: Returns the list of banner statuses and review statuses.
      security:
        - bearerAuth: []   # Admin access token required
  
  
      responses:
        "200":
          description: Status and review status list fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessBannerStatusResponse"
  
        "401":
          $ref: "#/components/responses/UnauthorizedError"
  
        "500":
          $ref: "#/components/responses/InternalServerError"
          
  /admin/login:
    post:
      tags:
        - Admin
      summary: Admin Login
      description: Authenticates an admin user and returns access & refresh tokens.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userName
                - password
              properties:
                userName:
                  type: string
                  example: "shayizz400"
                password:
                  type: string
                  example: "shayiz123"
  
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Login successful
                  data:
                    type: object
                    properties:
                      accessToken:
                        type: string
                      refreshToken:
                        type: string
  
        "400":
          $ref: '#/components/responses/BadRequestError'
  
        "401":
          $ref: '#/components/responses/UnauthorizedError'
  
        "500":
          $ref: '#/components/responses/InternalServerError'

  /service/update-service/{id}:
    post:
      tags:
        - Service
      summary: Update a service
      description: Updates an existing service. Partial update supported.
      security:
        - bearerAuth: []
  
      parameters:
        - in: header
          name: x-device-id
          required: true
          schema:
            type: string
  
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Service ID
  
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                displayName:
                  type: string
                imageId:
                  type: string
                targetValue:
                  type: string
  
      responses:
        "200":
          description: Service updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Service Updated successfully
                  data:
                    type: object
                    properties:
                      updated:
                        type: integer
                        example: 1
                      serviceId:
                        type: integer
                        example: 14
  
        "400":
          $ref: '#/components/responses/BadRequestError'
  
        "404":
          $ref: '#/components/responses/NotFoundError'
  
        "500":
          $ref: '#/components/responses/InternalServerError'


  /banner/getTargetAudience:
    get:
      tags:
        - Banner
      summary: Get Target Audience Options
      description: Returns the list of target audience categories and their items used in banner configuration.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Target audience options fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Target audience options fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          example: MANUAL
                        displayText:
                          type: string
                          example: Manual
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              displayText:
                                type: string
                                example: Selected Customers
                              value:
                                type: string
                                example: SELECTED_CUST
                              isFile:
                                type: boolean
                                example: true
  
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "500":
          $ref: "#/components/responses/InternalServerError"
          
  /banner/update-banner-category:
    put:
      tags:
        - Banner
      summary: Update Banner Category Display Text
      description: Updates the displayText of a specific banner category.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  example: 3
                updatingText:
                  type: string
                  example: "New Category Name"
              required:
                - id
                - updatingText
      responses:
        "200":
          description: Banner category updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: banner Category updated Succesfully
                  data:
                    type: object
                    properties:
                      updated:
                        type: integer
                        example: 1
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "500":
          $ref: "#/components/responses/InternalServerError"
          
  /banner/delete-banner-category:
    delete:
      tags:
        - Banner
      summary: Delete banner category
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: id
          required: true
          schema:
            type: integer
          description: Category ID to delete
      responses:
        "200":
          description: Banner category deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Banner category deleted successfully
                  data:
                    type: object
                    properties:
                      deleted:
                        type: integer
                        example: 1
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "500":
          $ref: "#/components/responses/InternalServerError"


  /banner/create-banner:
    post:
      tags:
        - Banner
      summary: Create a new banner
      description: |
        Creates a new banner with image upload, category, vendor mapping, schedule time, priority, and audience targeting.
        Owner should be "SHINR" or "VENDOR".

        **Image Requirements:**
        - Must be exactly **272 × 230 pixels**
        - Allowed types: **PNG, JPG**
        - Max size: **5MB**

      security:
        - bearerAuth: []   # Admin access token required

      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - title
                - categoryId
                - owner
                - priority
                - bannerImage
              properties:
                title:
                  type: string
                  example: "Winter Festival Offer"

                categoryId:
                  type: integer
                  example: 3

                owner:
                  type: string
                  enum: ["SHINR", "VENDOR"]
                  example: "SHINR"

                vendorId:
                  type: integer
                  nullable: true
                  example: 12
                  description: Vendor ID if owner = "VENDOR"

                targetAudienceId:
                  type: array
                  items:
                    type: integer
                  example: [1, 3]
                  description: Audience config IDs (non-file-based only stored)

                targetValue:
                  type: string
                  example: "ALL_USERS"

                priority:
                  type: integer
                  example: 1
                  description: Display order of the banner

                startTime:
                  type: string
                  format: date-time
                  example: "2025-01-10T00:00:00+05:30"
                  description: Start schedule. Defaults to now.

                endTime:
                  type: string
                  format: date-time
                  example: "2025-01-20T23:59:59+05:30"
                  description: End schedule. Defaults to **2099-01-01**.

                homePageView:
                  type: boolean
                  example: true
                  description: Whether banner is shown on home page.

                bannerImage:
                  type: string
                  format: binary
                  description: |
                    Banner image file.
                    Must be **PNG/JPG**, max **5MB**, must be **272x230 px**.

      responses:
        "200":
          description: Banner created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Banner Created Successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 101
                      title:
                        type: string
                        example: "Winter Festival Offer"
                      categoryId:
                        type: integer
                        example: 3
                      owner:
                        type: string
                        example: "SHINR"
                      vendorId:
                        type: integer
                        example: 12
                      priority:
                        type: integer
                        example: 1
                      startTime:
                        type: string
                        format: date-time
                      endTime:
                        type: string
                        format: date-time
                      status:
                        type: string
                        example: "DRAFT"
                      reviewStatus:
                        type: string
                        example: "PENDING"

        "400":
          $ref: "#/components/responses/BadRequestError"

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /banner/update-banner:
    put:
      tags:
        - Banner
      summary: Update banner details,
      description: |
        Updates an existing banner.OWNER Should be "SHINR" or "VENDOR".

        - **bannerId** and **targetAudienceId** are required.
        - OWNER Should be "SHINR" or "VENDOR".
        - If  owner = VENDOR , then **vendorId is required**.
        - If owner = SHINR, **vendorId must not be sent**.
        -  targetAudienceId must be an array with at least one item.
        - Dates ( startTime ,  endTime ) must be valid date with Timezone.

        ### Image Rules (if uploading a new banner image)
        - Supported formats: PNG, JPG
        - Required size: **272 × 230 px**
        - Max size: **5 MB**

        This endpoint accepts **multipart/form-data**.

      security:
        - bearerAuth: []   # Admin access token required

      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                bannerId:
                  type: string
                  example: "12"
                title:
                  type: string
                  example: "Diwali Offer"
                categoryId:
                  type: number
                  example: 3
                owner:
                  type: string
                  enum: ["SHINR", "VENDOR"]
                  example: "VENDOR"
                vendorId:
                  type: number
                  example: 5
                targetAudienceId:
                  type: array
                  items:
                    type: number
                  example: [1, 2, 5]
                targetValue:
                  type: string
                  example: "MAHARASHTRA"
                priority:
                  type: number
                  example: 1
                startTime:
                  type: string
                  format: date-time
                  example: "2025-12-04T00:00:00+05:30"
                endTime:
                  type: string
                  format: date-time
                  example: "2025-12-10T23:59:59+05:30"
                homePageView:
                  type: boolean
                  example: true
                bannerImage:
                  type: string
                  format: binary
                  description: Must be 272x230 PNG/JPG, max 5MB.
      responses:
        "200":
          description: Banner updated successfully
          content:
            application/json:
              schema:
                type: object
                example:
                  success: true
                  message: "Banner updated successfully"
                  data:
                    updated: true

        "400":
          description: Invalid payload or constraints failed
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  message: "Invalid banner id"

        "500":
          description: Server error
          content:
            application/json:
              schema:
                type: object
                example:
                  success: false
                  message: "Failed to update banners"

  /banner/approve-banner:
    post:
      tags:
        - Banner
      summary: Approve or reject a banner
      description: |
        Allows an admin to approve or reject a banner.

        - `bannerId` and `action` are required.
        - `action` must be either **APPROVE** or **REJECT**.
        - If `action = REJECT`, backend expects `rejectReason`.
        - Admin cannot approve/reject their own banner.
        - Banner must be in **PENDING** state and **DRAFT** status.

      security:
        - bearerAuth: []   # Admin access token required

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                bannerId:
                  type: number
                  example: 12
                  description: "Required. Must be a valid number."
                action:
                  type: string
                  enum: ["APPROVE", "REJECT"]
                  example: "APPROVE"
                  description: "Required. Must be either APPROVE or REJECT."
                rejectReason:
                  type: string
                  example: "Incorrect information in banner."
                  nullable: true
                  description: "Required only when action = REJECT."

              required:
                - bannerId
                - action

      responses:
        "200":
          description: Banner approval or rejection completed.
          content:
            application/json:
              example:
                success: true
                message: "Banner Approved"
                data:
                  approved: true

        "400":
          description: Validation or business rule failure.
          content:
            application/json:
              example:
                success: false
                message: "bannerId is required"

        "500":
          description: Server error
          content:
            application/json:
              example:
                success: false
                message: "Failed to Approve banners"

  /banner/getBanners:
    get:
      tags:
        - Banner
      summary: Get list of banners with filters
      description: |
        Fetches paginated list of banners with optional filters.

        - Only **active banners** (`isActive = true`) are returned.
        - `search` can match: banner title, vendor name, vendor code, or category display text.
        - `status`, `reviewStatus`, `categoryId`, `owner`, and `vendorId` are optional exact-match filters.
        - `vendorId` is applicable **only when owner = VENDOR**.
        - `startTime` and `endTime` accept **ISO date-time with timezone (timestamptz)**.
        - Supports pagination (`page`, `limit`) and sorting via `sortOrder`.

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          schema:
            type: string
            minLength: 3
          example: "offer"
          description: Search by title, vendor name/code, or category text.

        - in: query
          name: status
          schema:
            type: string
            enum: ["ACTIVE", "DRAFT", "EXPIRED"]
          example: "ACTIVE"
          description: Filter by banner status.

        - in: query
          name: reviewStatus
          schema:
            type: string
            enum: ["PENDING", "APPROVED", "REJECTED"]
          example: "APPROVED"
          description: Filter by review status.

        - in: query
          name: owner
          schema:
            type: string
            enum: ["ADMIN", "VENDOR"]
          example: "VENDOR"
          description: Banner owner type.

        - in: query
          name: categoryId
          schema:
            type: string
          example: "cat_12"

        - in: query
          name: vendorId
          schema:
            type: string
          example: "vendor_44"
          description: Applicable only when owner is VENDOR.

        - in: query
          name: startTime
          schema:
            type: string
            format: date-time
          example: "2025-12-04T00:00:00+05:30"
          description: Start of date range (timestamptz).

        - in: query
          name: endTime
          schema:
            type: string
            format: date-time
          example: "2025-12-10T23:59:59+05:30"
          description: End of date range (timestamptz).

        - in: query
          name: page
          schema:
            type: number
            default: 1
          example: 1

        - in: query
          name: limit
          schema:
            type: number
            default: 10
          example: 10

        - in: query
          name: sortOrder
          schema:
            type: string
            enum: ["ASC", "DESC"]
            default: "ASC"
          example: "ASC"

      responses:
        "200":
          description: Paginated list of banners
          content:
            application/json:
              example:
                success: true
                message: "Fetched successfully"
                pagination:
                  total: 25
                  page: 1
                  limit: 10
                data:
                  - id: 12
                    title: "New Year Offer"
                    category: "Promotions"
                    reviewStatus: "APPROVED"
                    status: "ACTIVE"
                    owner: "VENDOR"
                    displaySequence: 1
                    startTime: "2025-12-04T00:00:00.000Z"
                    endTime: "2025-12-10T23:59:59.000Z"
                    vendor: "ABC Motors"

        "401":
          description: Unauthorized

        "500":
          description: Failed to fetch banners

  /admin/list-adminusers:
    get:
      summary: Get list of admin roles
      tags:
        - Admin
      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: page
          required: false
          schema:
            type: integer
            example: 1

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            example: 10

      responses:
        "200":
          description: Admin roles fetched successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Admin roles fetched successfully
                  data:
                    type: object
                    properties:
                      list:
                        type: array
                        items:
                          type: object
                          properties:
                            displayName:
                              type: string
                              example: Super Admin
                            value:
                              type: string
                              example: SUPER_ADMIN
                      total:
                        type: integer
                        example: 3
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10

        "400":
          description: Failed to fetch admin roles.
        "401":
          description: Unauthorized access.


  /admin/createadminuser:
    post:
      summary: Create a new admin user
      description: |
        Creates a new admin user. **Access restricted:** Only adminusers with the `SUPER_ADMIN` role can perform this action.
      tags:
        - Admin
      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userName
                - newRole
                - email
                - joiningDate
              properties:
                userName:
                  type: string
                  minLength: 3
                  example: "Rohit Sharma"
                newRole:
                  type: string
                  description: Must be one of the allowed admin roles. Only SUPER_ADMIN can assign roles.
                  enum:
                    - ADMIN
                    - SUPER_ADMIN
                    - EMPLOYEE
                  example: "ADMIN"
                email:
                  type: string
                  format: email
                  example: "rohit.sharma@shinr.in"
                joiningDate:
                  type: string
                  format: date
                  description: ISO date format
                  example: "2025-02-10"

      responses:
        "200":
          description: Admin user created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Admin user created successfully
                  data:
                    type: object
                    properties:
                      empCode:
                        type: string
                        example: "SHINR15210205"

        "400":
          description: Validation failed or invalid role
        "403":
          description: Forbidden - Only SUPER_ADMIN can access this resource
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: You are not allowed to create admin users
                  code:
                    type: string
                    example: FORBIDDEN
                  statusCode:
                    type: number
                    example: 403
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-12-10T10:30:00.000Z"
                  path:
                    type: string
                    example: /admin/create-admin-user
                  method:
                    type: string
                    example: POST

        "500":
          description: Server error

  /banner/{id}:
    get:
      tags:
        - Banner
      summary: Get details of a single banner
      description: Fetches a single banner by its ID, including vendor, category, and target audience details.
      security:
        - bearerAuth: []   # Admin access required
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID of the banner to fetch
      responses:
        "200":
          description: Banner fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "single Banner fetched Successfully"
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 12
                      bannerImageUrl:
                        type: string
                        example: "https://cdn.example.com/banner123.png"
                      title:
                        type: string
                        example: "Winter Festival Offer"
                      category:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          displayText:
                            type: string
                            example: "Promotions"
                      owner:
                        type: string
                        example: "SHINR"
                      vendor:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 12
                          name:
                            type: string
                            example: "ABC Motors"
                      targetValue:
                        type: string
                        example: "ALL_USERS"
                      priority:
                        type: integer
                        example: 1
                      startTime:
                        type: string
                        format: date-time
                        example: "2025-12-04T00:00:00+05:30"
                      endTime:
                        type: string
                        format: date-time
                        example: "2025-12-10T23:59:59+05:30"
                      homePageView:
                        type: boolean
                        example: true
                      reviewStatus:
                        type: string
                        example: "PENDING"
                      targetAudienceDetails:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            displayText:
                              type: string
                              example: "Selected Customers"
                            category:
                              type: string
                              example: "MANUAL"
                            value:
                              type: string
                              example: "SELECTED_CUST"
                            isFile:
                              type: boolean
                              example: true
                            fileFieldName:
                              type: string
                              example: "customer_list.csv"
        "400":
          description: Bad request
        "401":
          description: Unauthorized
        "404":
          description: Banner not found
        "500":
          description: Failed to fetch banner

  /banner/delete-banner/{id}:
    delete:
      tags:
        - Banner
      summary: Delete a banner
      description: >
        Soft deletes a banner by marking it inactive and also soft deletes
        related audience and user target configurations.
        The action is audited using the authenticated admin ID.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Banner ID to delete
      responses:
        "200":
          description: Banner deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Banner Deleted Successfully"
                  data:
                    type: object
                    properties:
                      deleted:
                        type: integer
                        example: 1

        "400":
          description: Invalid banner id
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Invalid banner id"
                  code:
                    type: string
                    example: "INVALID_ID"

        "401":
          description: Unauthorized

        "500":
          description: Failed to delete banner

  /vendor/get-vendors:
    get:
      tags:
        - Vendor
      summary: Get vendor list with search and pagination
      description: |
        Fetches a paginated list of vendors.

        - Search matches **vendor name** or **vendor code**.
        - Results are always sorted alphabetically by vendor name (ASC).
        - This API is used to list vendors for selection in both
          **Reward** and **Banner** sections.

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          required: false
          schema:
            type: string
          description: Search by vendor name or vendor code.

        - in: query
          name: page
          required: false
          schema:
            type: integer
            default: 1
          description: Page number.

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            default: 10
          description: Number of vendors per page.

      responses:
        "200":
          description: Vendors fetched successfully
          content:
            application/json:
              example:
                success: true
                message: "Fetched successfully"
                pagination:
                  total: 18
                  page: 1
                  limit: 10
                data:
                  - id: 3
                    name: "ABC Motors"
                    vendorCode: "ABC001"
                  - id: 7
                    name: "Zen Auto"
                    vendorCode: "ZEN007"

        "401":
          description: Unauthorized

        "500":
          description: Failed to search vendors

  /reward/category-listing:
    get:
      tags:
        - Reward
      summary: Get reward category list with search and pagination
      description: |
        Fetches a paginated list of active reward categories.

        - Search matches **reward category display name**
        - Results are sorted by category ID (ASC)
        - Used while creating or editing rewards

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          required: false
          schema:
            type: string
          description: Search reward category by display name.

        - in: query
          name: page
          required: false
          schema:
            type: integer
            default: 1
          description: Page number.

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            default: 10
          description: Number of categories per page.

      responses:
        "200":
          description: Reward categories fetched successfully
          content:
            application/json:
              example:
                success: true
                message: "Fetched successfully"
                pagination:
                  total: 12
                  page: 1
                  limit: 10
                data:
                  - id: 1
                    name: "Fuel Rewards"
                  - id: 2
                    name: "Service Cashback"

        "401":
          description: Unauthorized

        "500":
          description: Failed to fetch reward categories

  /reward/service-listing:
    get:
      tags:
        - Reward
      summary: Get reward service list
      description: |
        Fetches a paginated list of active services used in rewards.

        - Search matches **service display name**
        - Only services with `isActive = true` are returned
        - Results are sorted by service ID (ASC)
        - Used while creating or editing rewards

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          required: false
          schema:
            type: string
          description: Search service by display name

        - in: query
          name: page
          required: false
          schema:
            type: integer
            default: 1
          description: Page number

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            default: 10
          description: Number of services per page

      responses:
        "200":
          description: Services fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Services fetched successfully
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: "Car Wash"
                      total:
                        type: integer
                        example: 15
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/get-target-audience:
    get:
      tags:
        - Reward
      summary: Get reward target audience options
      description: |
        Fetches target audience configurations used while creating or editing rewards.

        - Only **active** target audience configurations are returned.
        - Results are grouped by **category**.
        - Each category contains multiple audience items.
        - Used to configure reward audience targeting.
        - Categories are derived from **TargetAudience constants**:
          - MANUAL
          - EVERYONE
          - SPECIAL_RULE

      security:
        - bearerAuth: []

      responses:
        "200":
          description: Target audience options fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Target audience options fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        category:
                          type: string
                          example: MANUAL
                          description: One of the TargetAudience constants
                        displayText:
                          type: string
                          example: Manual
                        items:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              displayText:
                                type: string
                                example: Selected Customers
                              value:
                                type: string
                                example: SELECTED_CUST
                              isFile:
                                type: boolean
                                example: true
                              fileFieldName:
                                type: string
                                nullable: true
                                example: customers.csv

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/create-reward:
    post:
      tags:
        - Reward
      summary: Create a new reward
      description: |
        Creates a new reward with full validation.

        ### Conditional Rules
        - **vendorId** is required only when `owner = VENDOR` (Owner constants: SHINR, VENDOR)
        - **percentage** is required only when `offerType = CASHBACK | PERCENTAGE` (OfferType constants: PERCENTAGE, AMOUNT, CASHBACK)
        - **shinrPercentage & vendorPercentage** are required only when `contribution = SHARE` (Contribution constants: PLATFORM, VENDOR, SHARE)
        - **maxUsagePeriodValue** is required unless `maxUsagePeriod = OVERALL` (MaxUsagePeriod constants: HOUR, DAY, MONTH, OVERALL)
        - **endDate** must be greater than `startDate`
        - **serviceCategoryIds** is an **array of service category IDs**  
          Each ID must reference an active service category

        - **targetAudienceIds** is an **array of target audience IDs**  
          Each ID must reference an active target audience in the system  
          Target audience categories are derived from **TargetAudience constants**:  
          `MANUAL`, `EVERYONE`, `SPECIAL_RULE`
        - **status** must be one of RewardStatus constants: DRAFT, ACTIVE, EXPIRED

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - owner
                - title
                - sideText
                - summary
                - description
                - rewardCategoryId
                - serviceCategoryIds
                - displayCouponPage
                - displayVendorPage
                - offerType
                - maxDiscountAmount
                - minOrderValue
                - codeGeneration
                - priority
                - targetAudienceIds
                - startDate
                - totalGrabLimit
                - contribution
                - maxUsage
                - maxUsagePeriod
                - status
              properties:

                owner:
                  type: string
                  enum: [SHINR, VENDOR]
                  example: SHINR

                vendorId:
                  type: integer
                  nullable: true
                  example: 5
                  description: Required when owner is VENDOR

                title:
                  type: string
                  example: New Year Cashback

                sideText:
                  type: string
                  example: Limited period offer

                summary:
                  type: string
                  example: Get cashback on selected services

                description:
                  type: string
                  example: Flat cashback for first-time users

                rewardCategoryId:
                  type: integer
                  example: 2

                serviceCategoryIds:
                  type: array
                  items:
                    type: integer
                  example: [1, 3, 5]

                displayCouponPage:
                  type: boolean
                  example: true

                displayVendorPage:
                  type: boolean
                  example: false

                offerType:
                  type: string
                  enum: [PERCENTAGE, AMOUNT, CASHBACK]
                  example: PERCENTAGE

                percentage:
                  type: number
                  nullable: true
                  example: 20
                  description: Required when offerType is PERCENTAGE or CASHBACK

                maxDiscountAmount:
                  type: number
                  example: 500

                minOrderValue:
                  type: number
                  example: 1000

                codeGeneration:
                  type: string
                  example: AUTO

                priority:
                  type: integer
                  example: 1

                targetAudienceIds:
                  type: array
                  items:
                    type: integer
                  example: [2, 4]
                  description: |
                    IDs of target audiences. Must reference active target audiences in the system.
                    Categories are derived from **TargetAudience constants**: MANUAL, EVERYONE, SPECIAL_RULE.

                startDate:
                  type: string
                  format: date-time
                  example: "2026-01-01T00:00:00Z"

                endDate:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2026-12-31T23:59:59Z"

                totalGrabLimit:
                  type: integer
                  example: 1000

                contribution:
                  type: string
                  enum: [PLATFORM, VENDOR, SHARE]
                  example: SHARE

                shinrPercentage:
                  type: number
                  nullable: true
                  example: 50
                  description: Required when contribution is SHARE

                vendorPercentage:
                  type: number
                  nullable: true
                  example: 50
                  description: Required when contribution is SHARE

                maxUsage:
                  type: integer
                  example: 1

                maxUsagePeriod:
                  type: string
                  enum: [HOUR, DAY, MONTH, OVERALL]
                  example: MONTH

                maxUsagePeriodValue:
                  type: integer
                  nullable: true
                  example: 3
                  description: Required unless maxUsagePeriod is OVERALL

                status:
                  type: string
                  enum: [DRAFT, ACTIVE]
                  example: DRAFT

      responses:
        "200":
          description: Reward created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: reward Created Succefully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      title:
                        type: string
                        example: New Year Cashback
                      status:
                        type: string
                        example: DRAFT

        "400":
          description: Validation error
          content:
            application/json:
              examples:
                VendorMissing:
                  value:
                    success: false
                    message: vendorId is required when owner is vendor
                PercentageMissing:
                  value:
                    success: false
                    message: Percentage is required when offerType is Cashback or Percentage
                ContributionMismatch:
                  value:
                    success: false
                    message: SHINR Percentage is required when contribution is SHARE

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/update-reward:
    put:
      tags:
        - Reward
      summary: Update an existing reward
      description: |
        Updates an existing reward.

        ### Validation & Conditional Rules
        - **rewardId** is mandatory
        - All other fields are optional (partial update supported)
        - **vendorId** is required only when `owner = VENDOR` (Owner constants: SHINR, VENDOR)
        - **percentage** is required only when `offerType = CASHBACK | PERCENTAGE` (OfferType constants: PERCENTAGE, AMOUNT, CASHBACK)
        - **shinrPercentage & vendorPercentage** are required only when `contribution = SHARE` (Contribution constants: PLATFORM, VENDOR, SHARE)
        - **maxUsagePeriodValue** is required unless `maxUsagePeriod = OVERALL` (MaxUsagePeriod constants: HOUR, DAY, MONTH, OVERALL)
        - **endDate** must be greater than `startDate` (if both are provided)
        - **serviceCategoryIds** is an **array of service category IDs**  
          Each ID must reference an active service category

        - **targetAudienceIds** is an **array of target audience IDs**  
          Each ID must reference an active target audience in the system  
          Target audience categories are derived from **TargetAudience constants**:  
          `MANUAL`, `EVERYONE`, `SPECIAL_RULE`
        - **status** must be one of RewardStatus constants: DRAFT, ACTIVE, EXPIRED

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - rewardId
              properties:

                rewardId:
                  type: integer
                  example: 12

                owner:
                  type: string
                  enum: [SHINR, VENDOR]
                  example: SHINR

                vendorId:
                  type: integer
                  nullable: true
                  example: 5
                  description: Required when owner is VENDOR

                title:
                  type: string
                  example: Updated Cashback Offer

                sideText:
                  type: string
                  example: Limited period only

                summary:
                  type: string
                  example: Updated reward summary

                description:
                  type: string
                  example: Updated reward description

                rewardCategoryId:
                  type: integer
                  example: 3

                serviceCategoryIds:
                  type: array
                  items:
                    type: integer
                  example: [2, 4]

                displayCouponPage:
                  type: boolean
                  example: true

                displayVendorPage:
                  type: boolean
                  example: false

                offerType:
                  type: string
                  enum: [PERCENTAGE, AMOUNT, CASHBACK]
                  example: CASHBACK

                percentage:
                  type: number
                  nullable: true
                  example: 10
                  description: Required when offerType is CASHBACK or PERCENTAGE

                maxDiscountAmount:
                  type: number
                  example: 300

                minOrderValue:
                  type: number
                  example: 800

                codeGeneration:
                  type: string
                  example: AUTO

                priority:
                  type: integer
                  example: 2

                targetAudienceIds:
                  type: array
                  items:
                    type: integer
                  example: [1, 3]

                startDate:
                  type: string
                  format: date-time
                  example: "2026-02-01T00:00:00Z"

                endDate:
                  type: string
                  format: date-time
                  nullable: true
                  example: "2026-06-30T23:59:59Z"

                totalGrabLimit:
                  type: integer
                  example: 500

                contribution:
                  type: string
                  enum: [PLATFORM, VENDOR, SHARE]
                  example: SHARE

                shinrPercentage:
                  type: number
                  nullable: true
                  example: 60
                  description: Required when contribution is SHARE

                vendorPercentage:
                  type: number
                  nullable: true
                  example: 40
                  description: Required when contribution is SHARE

                maxUsage:
                  type: integer
                  example: 1

                maxUsagePeriod:
                  type: string
                  enum: [HOUR, DAY, MONTH, OVERALL]
                  example: MONTH

                maxUsagePeriodValue:
                  type: integer
                  nullable: true
                  example: 6
                  description: Required unless maxUsagePeriod is OVERALL

                status:
                  type: string
                  enum: [DRAFT, ACTIVE]
                  example: ACTIVE

      responses:
        "200":
          description: Reward updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: reward Updated Succefully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 12
                      title:
                        type: string
                        example: Updated Cashback Offer
                      status:
                        type: string
                        example: ACTIVE

        "400":
          description: Validation or business rule error
          content:
            application/json:
              examples:
                RewardNotFound:
                  value:
                    success: false
                    message: the given reward is not found
                VendorMissing:
                  value:
                    success: false
                    message: vendorId is required when owner is vendor
                PercentageMissing:
                  value:
                    success: false
                    message: Percentage is required when offerType is Cashback or Percentage
                ContributionMismatch:
                  value:
                    success: false
                    message: SHINR Percentage is required when contribution is SHARE

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/getSingleReward/{id}:
    get:
      tags:
        - Reward
      summary: Get single reward details
      description: |
        Fetch detailed information of a single reward.

        - Returns reward details along with:
          - Category
          - Offer type
          - Contribution details
          - Vendor information
          - Target audience configuration
        - Uses constant-based enum values
        - Response is compatible with update-reward payload

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Reward ID

      responses:
        "200":
          description: Single reward fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Single reward fetched successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 12

                      title:
                        type: string
                        example: New Year Cashback

                      description:
                        type: string
                        example: Flat cashback on selected services

                      summary:
                        type: string
                        example: Cashback reward

                      sideText:
                        type: string
                        example: Limited offer

                      rewardCategory:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          displayName:
                            type: string
                            example: Food & Beverages

                      offerType:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 5
                          offerType:
                            type: string
                            enum: [PERCENTAGE, AMOUNT, CASHBACK]
                            example: PERCENTAGE
                          percentage:
                            type: number
                            nullable: true
                            example: 20
                          maxAmount:
                            type: number
                            nullable: true
                            example: 500

                      contributor:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 4
                          contributor:
                            type: string
                            enum: [PLATFORM, VENDOR, SHARE]
                            example: SHARE
                          shinrPercentage:
                            type: number
                            nullable: true
                            example: 50
                          vendorPercentage:
                            type: number
                            nullable: true
                            example: 50

                      owner:
                        type: string
                        enum: [SHINR, VENDOR]
                        example: SHINR

                      vendor:
                        type: object
                        nullable: true
                        properties:
                          id:
                            type: integer
                            example: 7
                          name:
                            type: string
                            example: ABC Motors

                      targetAudienceDetails:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 2
                            displayName:
                              type: string
                              example: Selected Customers
                            value:
                              type: string
                              example: SELECTED_CUST
                            category:
                              type: string
                              example: MANUAL
                            isFile:
                              type: boolean
                              example: true
                            fileFieldName:
                              type: string
                              nullable: true
                              example: customers.csv

                      displayCouponPage:
                        type: boolean
                        example: true

                      displayVendorPage:
                        type: boolean
                        example: false

                      minOrderValue:
                        type: number
                        example: 1000

                      maxUsage:
                        type: integer
                        example: 1

                      maxUsagePeriod:
                        type: string
                        enum: [HOUR, DAY, MONTH, OVERALL]
                        example: MONTH

                      maxUsagePeriodValue:
                        type: integer
                        nullable: true
                        example: 3

                      priority:
                        type: integer
                        example: 1

                      startDate:
                        type: string
                        format: date-time
                        example: "2026-01-01T00:00:00Z"

                      endDate:
                        type: string
                        format: date-time
                        example: "2026-12-31T23:59:59Z"

                      totalGrabLimit:
                        type: integer
                        example: 1000

                      codeGeneration:
                        type: string
                        nullable: true
                        example: AUTO

                      status:
                        type: string
                        enum: [DRAFT, ACTIVE]
                        example: ACTIVE

        "400":
          description: Reward not found
          content:
            application/json:
              example:
                success: false
                message: The given reward is not found

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/list-rewards:
    post:
      tags:
        - Reward
      summary: List rewards
      description: |
        Fetch a paginated list of rewards with filters.

        - Supports search across title, side text, vendor name/code, and category
        - All filters are optional
        - Multiple filters accept **arrays**
        - Uses constant-based enum values
        - Only **active** rewards are returned

        ### Array-based Filters
        - **status[]** → RewardStatus constants: DRAFT, ACTIVE, EXPIRED
        - **categoryId[]** → Reward category IDs
        - **serviceId[]** → Service category IDs
        - **vendorId[]** → Vendor IDs (only when owner = VENDOR)

        ### Conditional Rules
        - **vendorId[]** is allowed only when `owner = VENDOR`
        - **startTime & endTime** filter rewards by date range
        - Pagination is supported using `page` and `limit`

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          required: false
          schema:
            type: string
            minLength: 3
          description: Search keyword (minimum 3 characters)

      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:

                status:
                  type: array
                  items:
                    type: string
                    enum: [DRAFT, ACTIVE, EXPIRED]
                  example: [ACTIVE, DRAFT]

                owner:
                  type: string
                  enum: [SHINR, VENDOR]
                  example: SHINR

                vendorId:
                  type: array
                  items:
                    type: integer
                  example: [5, 8]
                  description: Allowed only when owner is VENDOR

                categoryId:
                  type: array
                  items:
                    type: integer
                  example: [1, 3]

                serviceId:
                  type: array
                  items:
                    type: integer
                  example: [2, 4]

                startTime:
                  type: string
                  format: date-time
                  example: "2026-01-01T00:00:00Z"

                endTime:
                  type: string
                  format: date-time
                  example: "2026-12-31T23:59:59Z"

                page:
                  type: integer
                  minimum: 1
                  example: 1

                limit:
                  type: integer
                  minimum: 1
                  maximum: 100
                  example: 10

      responses:
        "200":
          description: Rewards fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Rewards fetched successfully
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 12

                            title:
                              type: string
                              example: New Year Cashback

                            category:
                              type: object
                              properties:
                                displayText:
                                  type: string
                                  example: Food & Beverages

                            owner:
                              type: string
                              enum: [SHINR, VENDOR]
                              example: SHINR

                            vendor:
                              type: object
                              nullable: true
                              properties:
                                name:
                                  type: string
                                  example: ABC Motors

                            startDate:
                              type: string
                              format: date-time
                              example: "2026-01-01T00:00:00Z"

                            endDate:
                              type: string
                              format: date-time
                              example: "2026-12-31T23:59:59Z"

                            status:
                              type: string
                              enum: [DRAFT, ACTIVE, EXPIRED]
                              example: ACTIVE

                      total:
                        type: integer
                        example: 42

                      page:
                        type: integer
                        example: 1

                      limit:
                        type: integer
                        example: 10

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /reward/delete-reward/{id}:
    post:
      tags:
        - Reward
      summary: Delete a reward
      description: |
        Soft deletes a reward by ID.

        - Marks the reward as **inactive**
        - Also deactivates all related data:
          - Reward audience mappings
          - Reward service mappings
          - Reward user target mappings
          - Reward usage records
        - Uses authenticated admin context (`removedBy`)
        - Only **active** rewards can be deleted

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Reward ID to delete

      responses:
        "200":
          description: Reward deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Reward deleted successfully
                  data:
                    type: object
                    properties:
                      deleted:
                        type: integer
                        example: 1

        "404":
          description: Reward not found
          content:
            application/json:
              example:
                success: false
                message: Reward not found

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/add-brand:
    post:
      tags:
        - Vehicle
      summary: Add a new vehicle brand
      description: |
        Creates a new vehicle brand.

        - Brand name must be **unique**
        - Only **active** brands are checked for duplication
        - Newly created brand is marked as **active**
        - Used while managing vehicle-related configurations

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: Toyota
                  description: Name of the vehicle brand

      responses:
        "200":
          description: Vehicle brand added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Vehicle Brand added successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 12
                      name:
                        type: string
                        example: Toyota
                      isActive:
                        type: boolean
                        example: true

        "400":
          description: Vehicle brand already exists
          content:
            application/json:
              example:
                success: false
                message: Vehicle brand already exists

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/update-brand:
    put:
      tags:
        - Vehicle
      summary: Update vehicle brand
      description: |
        Updates the name of an existing vehicle brand.

        ### Rules
        - **vehicleTypeId** is mandatory
        - **name** must be unique among active vehicle brands
        - Only **active** vehicle brands can be updated
        - Performs a **partial update** on the brand record

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - vehicleTypeId
                - name
              properties:
                vehicleTypeId:
                  type: integer
                  example: 5
                  description: ID of the vehicle brand to be updated

                name:
                  type: string
                  example: Honda
                  description: New name for the vehicle brand (must be unique)

      responses:
        "200":
          description: Vehicle brand updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Vehicle Brand updated successfully
                  data:
                    type: object
                    description: Update operation result
                    properties:
                      affected:
                        type: integer
                        example: 1

        "400":
          description: Validation or business error
          content:
            application/json:
              examples:
                BrandExists:
                  value:
                    success: false
                    message: Vehicle brand already exists
                BrandNotFound:
                  value:
                    success: false
                    message: vehicle brand not found

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/delete-brand/{id}:
    delete:
      tags:
        - Vehicle
      summary: Delete vehicle brand
      description: |
        Soft deletes a vehicle brand by marking it as inactive.

        ### Rules
        - **id** is mandatory
        - Only existing vehicle brands can be deleted
        - This is a **soft delete** (`isActive = false`)
        - Deleted brands will not appear in listings

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Vehicle brand ID

      responses:
        "200":
          description: Vehicle brand deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Vehicle Brand deleted successfully
                  data:
                    type: object
                    description: Delete operation result
                    properties:
                      affected:
                        type: integer
                        example: 1

        "400":
          description: Vehicle brand not found
          content:
            application/json:
              example:
                success: false
                message: vehicle brand not found

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/brand-listing:
    get:
      tags:
        - Vehicle
      summary: Get vehicle brand listing
      description: |
        Fetch a paginated list of active vehicle brands.

        ### Features
        - Supports **search by brand name**
        - Pagination enabled
        - Returns only **active** vehicle brands

        ### Query Params
        - `search` is optional
        - Default `page = 1`
        - Default `limit = 10`

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          required: false
          schema:
            type: string
          description: Search vehicle brand by name

        - in: query
          name: page
          required: false
          schema:
            type: integer
            default: 1
          description: Page number

        - in: query
          name: limit
          required: false
          schema:
            type: integer
            default: 10
          description: Number of records per page

      responses:
        "200":
          description: Vehicle brand list fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: Honda
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 25
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/add-vehicle:
    post:
      tags:
        - Vehicle
      summary: Add a new vehicle
      description: |
        Add a new vehicle model under a specific brand and category.

        ### Validations
        - **model** is required
        - **makeId** must reference an active vehicle brand
        - **categoryId** must reference an active vehicle category
        - Duplicate vehicles (same model + make + category) are not allowed

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - model
                - makeId
                - categoryId
              properties:
                model:
                  type: string
                  example: City
                makeId:
                  type: integer
                  example: 3
                categoryId:
                  type: integer
                  example: 2

      responses:
        "200":
          description: Vehicle added successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Vehicle added successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      model:
                        type: string
                        example: City
                      makeId:
                        type: integer
                        example: 3
                      categoryId:
                        type: integer
                        example: 2
                      isActive:
                        type: boolean
                        example: true

        "400":
          description: Validation or business rule error
          content:
            application/json:
              examples:
                categoryOrMakeNotFound:
                  summary: Category or Make not found
                  value:
                    success: false
                    message: category or make not found
                    code: CATEGORY_OR_MAKE_NOT_FOUND
                vehicleExists:
                  summary: Vehicle already exists
                  value:
                    success: false
                    message: Vehicle already exists
                    code: VEHICLE_EXISTS

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError" 

  /cars/edit-vehicle/{id}:
    put:
      tags:
        - Vehicle
      summary: Edit vehicle details
      description: |
        Update details of an existing vehicle.

        ### Rules
        - **id** (path param) is mandatory
        - All body fields are optional (partial update supported)
        - **makeId** must reference an active vehicle brand (if provided)
        - **categoryId** must reference an active vehicle category (if provided)
        - Vehicle must be active

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Vehicle ID

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model:
                  type: string
                  example: City 2024
                makeId:
                  type: integer
                  example: 3
                categoryId:
                  type: integer
                  example: 2

      responses:
        "200":
          description: Vehicle updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Vehicle updated successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      model:
                        type: string
                        example: City 2024
                      makeId:
                        type: integer
                        example: 3
                      categoryId:
                        type: integer
                        example: 2
                      isActive:
                        type: boolean
                        example: true

        "400":
          description: Validation or business rule error
          content:
            application/json:
              examples:
                vehicleNotFound:
                  summary: Vehicle not found
                  value:
                    success: false
                    message: Vehicle not found
                    code: VEHICLE_NOT_FOUND
                categoryNotFound:
                  summary: Category not found
                  value:
                    success: false
                    message: Category not found
                    code: CATEGORY_NOT_FOUND
                makeNotFound:
                  summary: Make not found
                  value:
                    success: false
                    message: Make not found
                    code: MAKE_NOT_FOUND

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/delete-vehicle/{id}:
    post:
      tags:
        - Vehicle
      summary: Delete vehicle
      description: |
        Soft delete a vehicle by marking it as inactive.

        ### Rules
        - **id** (path param) is mandatory
        - Vehicle must exist and be active
        - This is a **soft delete** operation (`isActive = false`)

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Vehicle ID

      responses:
        "200":
          description: Vehicle deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Vehicle deleted successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 18
                      model:
                        type: string
                        example: Swift
                      makeId:
                        type: integer
                        example: 2
                      categoryId:
                        type: integer
                        example: 1
                      isActive:
                        type: boolean
                        example: false

        "400":
          description: Vehicle not found
          content:
            application/json:
              example:
                success: false
                message: Vehicle not found
                code: VEHICLE_NOT_FOUND

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/vehicle-models-listing:
    post:
      tags:
        - Vehicle
      summary: List vehicle models
      description: |
        Fetch a paginated list of vehicle models with optional filters.

        ### Filtering Rules
        - **search** → searches by vehicle model name (query param)
        - **searchBrandId** → filter by one or more vehicle brand IDs
        - **searchVehicleTypeId** → filter by one or more vehicle category IDs
        - Only **active vehicles** are returned

        ### Pagination
        - **page** defaults to `1`
        - **limit** defaults to `10`

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          schema:
            type: string
            minLength: 1
          description: Search by vehicle model name
          example: Swift

        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number

        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of records per page

      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                searchBrandId:
                  type: array
                  description: Filter by vehicle brand IDs
                  items:
                    type: integer
                  example: [1, 2]

                searchVehicleTypeId:
                  type: array
                  description: Filter by vehicle category IDs
                  items:
                    type: integer
                  example: [3, 4]

      responses:
        "200":
          description: Vehicle models fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 12
                        model:
                          type: string
                          example: Swift
                        make:
                          type: string
                          example: Maruti
                        category:
                          type: string
                          example: Hatchback
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 25
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalPages:
                        type: integer
                        example: 3

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/vehicle-brand-listing:
    get:
      tags:
        - Vehicle
      summary: List vehicle brands
      description: |
        Fetch a paginated list of vehicle brands along with the number of active vehicles for each brand.

        ### Filtering Rules
        - **searchBrandName** → filter by partial brand name (optional)
        - Only **active brands** are returned
        - **numberOfVehicle** reflects only active vehicles

        ### Pagination
        - **page** defaults to `1`
        - **limit** defaults to `10`

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: searchBrandName
          schema:
            type: string
          description: Partial brand name to filter brands
          example: Maruti

        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number

        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of records per page

      responses:
        "200":
          description: Vehicle brands fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        ListedBrands:
                          type: integer
                          description: Total number of active brands
                          example: 25
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: Maruti
                        numberOfVehicle:
                          type: integer
                          example: 12
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 25
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalPages:
                        type: integer
                        example: 3

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/list-vehicle-types:
    get:
      tags:
        - Vehicle
      summary: List vehicle types
      description: |
        Fetch a paginated list of active vehicle types (categories).

        ### Filtering
        - **search** → optional search string to filter vehicle types by name
        - Only **active vehicle types** are returned

        ### Pagination
        - **page** defaults to `1`
        - **limit** defaults to `10`

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search term to filter vehicle types by name
          example: Car

        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number

        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of records per page

      responses:
        "200":
          description: Vehicle types fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Data fetched successfully
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: SUV
                  pagination:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 15
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      totalPages:
                        type: integer
                        example: 2

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/add-vehicle-types:
    post:
      tags:
        - Vehicle
      summary: Add a new vehicle type
      description: |
        Adds a new vehicle type (category) to the system.

        - Vehicle type names must be **unique**.
        - Only **active** vehicle types are considered for other operations.
        - Returns the created vehicle type object.

      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: SUV
                  description: Name of the vehicle type

      responses:
        "201":
          description: Vehicle type created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: VehicleType added successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: SUV
                      isActive:
                        type: boolean
                        example: true

        "400":
          description: Validation error / Duplicate vehicle type
          content:
            application/json:
              examples:
                VehicleTypeDuplicate:
                  value:
                    success: false
                    message: Vehicle type already exists
                    code: VEHICLETYPE_DUPLICATE

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/update-vehicle-types:
    put:
      tags:
        - Vehicle
      summary: Update a vehicle type
      description: |
        Updates the name of an existing vehicle type (category).

        - **vehicleTypeId** (query) is required to identify the vehicle type.
        - **name** (body) is required and must be unique among active vehicle types.
        - Returns the updated vehicle type object.

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: vehicleTypeId
          required: true
          schema:
            type: integer
          description: ID of the vehicle type to update

      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  example: SUV
                  description: New name for the vehicle type

      responses:
        "200":
          description: Vehicle type updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: VehicleType updated successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: SUV
                      isActive:
                        type: boolean
                        example: true

        "400":
          description: Validation error / Vehicle type not found / Duplicate name
          content:
            application/json:
              examples:
                VehicleTypeNotFound:
                  value:
                    success: false
                    message: Vehicle type not found
                    code: VEHICLETYPE_NOT_FOUND
                VehicleTypeAlreadyExists:
                  value:
                    success: false
                    message: Vehicle type already exists
                    code: VEHICLETYPE_ALREADY_EXISTS

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/vehicle-type-listing/{id}:
    post:
      tags:
        - Vehicle
      summary: Delete a vehicle type
      description: |
        Marks a vehicle type (category) as inactive (`isActive = false`).

        - **vehicleTypeId** (path parameter) is required to identify the vehicle type.
        - If the vehicle type does not exist or is already inactive, returns an error.
        - Returns the deleted (updated) vehicle type object.

      security:
        - bearerAuth: []

      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID of the vehicle type to delete

      responses:
        "200":
          description: Vehicle type deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: VehicleType deleted successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: SUV
                      isActive:
                        type: boolean
                        example: false

        "400":
          description: Vehicle type not found
          content:
            application/json:
              example:
                success: false
                message: Vehicle type not found
                code: VEHICLETYPE_NOT_FOUND

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"

  /cars/vehicle-type-listing:
    get:
      tags:
        - Vehicle
      summary: List vehicle types
      description: |
        Fetches a paginated list of vehicle types (categories) along with the number of active vehicles in each type.

        - Supports optional search by vehicle type name (`searchVehicleTypeName`).
        - Returns total active vehicle types and paginated items with vehicle counts.

      security:
        - bearerAuth: []

      parameters:
        - in: query
          name: searchVehicleTypeName
          schema:
            type: string
          required: false
          description: Partial name to filter vehicle types

        - in: query
          name: page
          schema:
            type: integer
            default: 1
          required: false
          description: Page number for pagination

        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          required: false
          description: Number of items per page (max 100)

      responses:
        "200":
          description: Vehicle types fetched successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Vehicle types fetched successfully
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 15
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: SUV
                            numberOfVehicle:
                              type: integer
                              example: 25

        "401":
          $ref: "#/components/responses/UnauthorizedError"

        "500":
          $ref: "#/components/responses/InternalServerError"


components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
  
    SuccessUserDashboardResponse:
      type: object
      properties:
        status:
          type: boolean
          example: true
        message:
          type: string
          example: User details fetched successfully
        data:
          type: object
          properties:
            name:
              type: string
              example: John Doe
            mobileNumber:
              type: string
              example: "9876543210"
            email:
              type: string
              example: johndoe@gmail.com
            profilePic:
              type: string
              nullable: true
              example: https://cdn.app.com/files/profilepic.jpg
            defaultLocation:
              type: object
              nullable: true
              properties:
                name:
                  type: string
                  example: Home
                addressLine1:
                  type: string
                  example: 123 MG Road, Bangalore
                  
    NotFoundUserResponse:
      type: object
      properties:
        status:
          type: boolean
          example: false
        message:
          type: string
          example: User not found
  
    SuccessBannerStatusResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Status and review list fetched successfully
        data:
          type: object
          properties:
            statusList:
              type: array
              items:
                type: object
                properties:
                  displayName:
                    type: string
                    example: Active
                  value:
                    type: string
                    example: ACTIVE
    
            reviewStatusList:
              type: array
              items:
                type: object
                properties:
                  displayName:
                    type: string
                    example: Approved
                  value:
                    type: string
                    example: APPROVED
  
    SuccessCategoryListResponse:
      type: object
      properties:
        message:
          type: string
          example: Categories fetched successfully
        data:
          type: object
          properties:
            items:
              type: array
              items:
                type: object
                properties:
                  displayName:
                    type: string
                    example: "Home Page"
                  value:
                    type: string
                    example: "HOME_PAGE"
            total:
              type: integer
              example: 8
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 10
  
    SuccessVendorListResponse:
      type: object
      properties:
        message:
          type: string
          example: Vendors fetched successfully
        data:
          type: object
          properties:
            items:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: integer
                    example: 12
                  name:
                    type: string
                    example: "ABC Car Wash"
            total:
              type: integer
              example: 40
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 10

    SuccessUpdateProfileResponse:
      type: object
      properties:

        data:
          type: object
          properties:
            updated:
              type: integer
              example: 1
            userId:
              type: integer
              example: 12
        message:
          type: string
          example: Profile updated successfully
  
    SuccessMessageOnly:
      type: object
      properties:
        message: { type: string, example: Operation completed successfully }

    SuccessOtpTokenResponse:
      type: object
      properties:
        message: { type: string, example: OTP resent successfully }
        data:
          type: object
          properties:
            otpToken: { type: string }

    SuccessAuthTokensResponse:
      type: object
      properties:
        message: { type: string, example: OTP verified successfully }
        data:
          type: object
          properties:
            accessToken: { type: string }
            refreshToken: { type: string }
            
    SuccessCreateBannerResponse:
      type: object
      properties:
        message:
          type: string
          example: Banner created successfully

    SuccessLocationAutocompleteResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: array
          items:
            type: object
            properties:
              addressId: { type: integer }
              name: { type: string }
              addressLine1: { type: string }
              city: { type: string }
              state: { type: string }
              country: { type: string }
              pinCode: { type: string }
              latitude: { type: number }
              longitude: { type: number }
        total: { type: integer }
        page: { type: integer }
        limit: { type: integer }

    SuccessAddressResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: object
          properties:
            addressId: { type: integer }
            nickName: { type: string }
            name: { type: string }
            addressLine1: { type: string }
            city: { type: string }
            state: { type: string }
            country: { type: string }
            pinCode: { type: string }
            latitude: { type: number }
            longitude: { type: number }

    SuccessSelectedAddressResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: object
          properties:
            selectedAddressId: { type: integer }

    SuccessCarsResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: array
          items:
            type: object
            properties:
              id: { type: integer }
              model: { type: string }
              makeId: { type: integer }
              makeName: { type: string }
              categoryId: { type: integer }
              categoryName: { type: string }
        total: { type: integer }
        page: { type: integer }
        limit: { type: integer }

    SuccessCarBrandsResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: array
          items:
            type: object
            properties:
              id: { type: integer }
              name: { type: string }
        total: { type: integer }
        page: { type: integer }
        limit: { type: integer }

    AddServiceRequest:
      type: object
      required:
        - name
        - displayName
        - imageId
        - targetValue
      properties:
        name: { type: string }
        displayName: { type: string }
        imageId: { type: string }
        targetValue: { type: string }

    SuccessAddServiceResponse:
      type: object
      properties:
        message: { type: string }
        data:
          type: object
          properties:
            id: { type: integer }
            name: { type: string }
            displayName: { type: string }
            imageId: { type: string }
            targetValue: { type: string }
            isActive: { type: boolean }

    ####################################################
    # NEW SCHEMA FOR USER ADDRESS LIST
    ####################################################

    SuccessUserAddressesResponse:
      type: object
      properties:
        message:
          type: string
          example: User addresses fetched successfully
        data:
          type: object
          properties:
            addresses:
              type: array
              items:
                type: object
                properties:
                  addressId: { type: integer }
                  nickName: { type: string }
                  name: { type: string }
                  addressLine1: { type: string }
                  country: { type: string }
                  city: { type: string }
                  state: { type: string }
                  pinCode: { type: string }
                  latitude: { type: number }
                  longitude: { type: number }
                  isDefault: { type: boolean }
                  createdAt: { type: string }
                  updatedAt: { type: string }
            total:
              type: integer
              example: 1

    ErrorResponse:
      type: object
      properties:
        message: { type: string }
        errorCode: { type: string }
        statusCode: { type: integer }

  responses:
  
    BadRequestError:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    UnauthorizedError:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    NotFoundError:
      description: Resource Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

    TooManyRequestsError:
      description: Too many requests
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
            
            

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
